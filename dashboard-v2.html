<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scout Premium ‚Äî Investment Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a3e 50%, #0f0f1e 100%);
            color: #e0e0e0;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background: #0a0e27;
            border-bottom: 3px solid #00d4ff;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
            display: inline-block;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            margin: 0 40px;
        }

        .nav-links a {
            color: #00d4ff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 700;
            transition: all 0.3s ease;
            padding: 8px 12px;
        }

        .nav-links a:hover {
            color: #00ff88;
        }

        .nav-links a.active {
            color: #00ff88;
            border-bottom: 3px solid #00ff88;
            padding-bottom: 5px;
        }

        .header-buttons {
            display: flex;
            gap: 12px;
        }

        .header-buttons button {
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            color: #0a0e27;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .header-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
        }

        .main-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 280px;
            background: rgba(10, 14, 39, 0.8);
            border-right: 2px solid rgba(0, 212, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-title {
            font-size: 14px;
            color: #00d4ff;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 16px;
        }

        .stock-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 40px;
        }

        .stock-item {
            background: rgba(30, 30, 60, 0.5);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            padding: 12px 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stock-item:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: #00d4ff;
            transform: translateX(4px);
        }

        .stock-item.active {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.1) 100%);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        .stock-ticker {
            font-weight: 800;
            color: #e0e0e0;
            font-size: 15px;
        }

        .stock-price {
            font-size: 13px;
            color: #888;
            font-weight: 700;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 30px 40px;
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.2);
        }

        .stock-info h1 {
            font-size: 40px;
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            font-weight: 900;
        }

        .stock-price-display {
            font-size: 36px;
            font-weight: 900;
            color: #e0e0e0;
            margin-bottom: 12px;
        }

        .stock-change {
            display: flex;
            gap: 16px;
            align-items: center;
            padding: 12px 16px;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
        }

        .change-positive {
            color: #00ff88;
        }

        .change-negative {
            color: #ff4444;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }

        .stat {
            background: rgba(0, 212, 255, 0.08);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
        }

        .stat-label {
            font-size: 11px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 900;
            color: #00ff88;
        }

        .tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
        }

        .tab-button {
            background: none;
            border: none;
            color: #888;
            padding: 14px 18px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-button:hover {
            color: #00d4ff;
        }

        .tab-button.active {
            color: #00ff88;
            border-bottom-color: #00ff88;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .accordion {
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.5) 0%, rgba(20, 20, 45, 0.5) 100%);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .accordion-header {
            background: rgba(0, 212, 255, 0.08);
            padding: 16px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
            transition: all 0.3s ease;
            user-select: none;
        }

        .accordion-header:hover {
            background: rgba(0, 212, 255, 0.15);
        }

        .accordion-header h3 {
            color: #00d4ff;
            font-size: 16px;
            font-weight: 800;
        }

        .accordion-toggle {
            color: #00d4ff;
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .accordion.open .accordion-toggle {
            transform: rotate(180deg);
        }

        .accordion-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 16px;
        }

        .accordion.open .accordion-body {
            max-height: 1000px;
            padding: 16px;
        }

        .table-compact {
            width: 100%;
            font-size: 12px;
            border-collapse: collapse;
        }

        .table-compact th {
            color: #00d4ff;
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
            font-weight: 700;
        }

        .table-compact td {
            padding: 8px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
        }

        .table-compact tr:hover {
            background: rgba(0, 212, 255, 0.05);
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .metric-box {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.1);
            border-radius: 6px;
            padding: 12px;
        }

        .metric-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 18px;
            font-weight: 800;
            color: #00ff88;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-right: 4px;
            margin-bottom: 4px;
        }

        .badge-buy {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .badge-hold {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
        }

        .news-item {
            padding: 12px;
            border-left: 3px solid #00d4ff;
            margin-bottom: 12px;
            background: rgba(0, 212, 255, 0.05);
            border-radius: 4px;
        }

        .news-title {
            font-weight: 700;
            color: #e0e0e0;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .news-meta {
            font-size: 10px;
            color: #888;
            display: flex;
            justify-content: space-between;
        }

        @media (max-width: 1024px) {
            .main-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid rgba(0, 212, 255, 0.2);
                max-height: 120px;
            }

            .stock-list {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                margin-bottom: 0;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 212, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: #00d4ff;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00ff88;
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo">üìà Scout Premium</a>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="dashboard-v2.html" class="active">Dashboard</a>
            <a href="methodology.html">Methodology</a>
            <a href="https://github.com/Clawdbot26/scout-premium-dashboard" target="_blank">GitHub</a>
        </div>
        <div class="header-buttons">
            <button onclick="exportToPDF()">üì• Export PDF</button>
        </div>
    </header>

    <div class="main-layout">
        <!-- SIDEBAR: Stock List -->
        <div class="sidebar">
            <div class="sidebar-title">üèÜ Top 7 by Score</div>
            <div style="font-size: 12px; color: #888; margin-bottom: 16px; font-weight: 600;">Ranked by Value Score</div>
            <div class="stock-list" id="stockList">
                <!-- Generated by JavaScript -->
            </div>

            <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid rgba(0, 212, 255, 0.2);">
                <div class="sidebar-title">Portfolio Stats</div>
                <div style="font-size: 13px; color: #888; line-height: 2.2;">
                    <div>üìä Score: <span style="color: #00ff88; font-weight: 800; font-size: 14px;">8.2/10</span></div>
                    <div>üìà Upside: <span style="color: #00ff88; font-weight: 800; font-size: 14px;">+38.4%</span></div>
                    <div>üéØ Win Rate: <span style="color: #00ff88; font-weight: 800; font-size: 14px;">87.5%</span></div>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="content">
            <!-- Stock Header -->
            <div class="stock-header">
                <div class="stock-info">
                    <h1 id="stockName">Select a stock</h1>
                    <div class="stock-price-display" id="stockPrice">‚Äî</div>
                    <span class="stock-change" id="stockChange">‚Äî</span>
                </div>
                <div class="quick-stats" id="quickStats">
                    <!-- Generated by JavaScript -->
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-button active" onclick="switchTab('overview')">Overview</button>
                <button class="tab-button" onclick="switchTab('analysis')">Analysis</button>
                <button class="tab-button" onclick="switchTab('news')">News & Events</button>
                <button class="tab-button" onclick="switchTab('history')">Performance</button>
            </div>

            <!-- Tab 1: Overview -->
            <div id="overview" class="tab-content active">
                <!-- Action Recommendation Box -->
                <div class="accordion open" onclick="toggleAccordion(this)" style="margin-bottom: 24px; border: 2px solid #00d4ff;">
                    <div class="accordion-header" style="background: rgba(0, 212, 255, 0.15);">
                        <h3 style="color: #00d4ff; font-size: 16px;">üí° What to Do Now</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="actionBody"></div>
                </div>

                <!-- Metrics Accordion -->
                <div class="accordion" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üìä Key Metrics</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body">
                        <div class="metric-grid" id="metricsGrid"></div>
                    </div>
                </div>

                <!-- Valuation Accordion -->
                <div class="accordion" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üí∞ Valuation vs Peers</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="valuationBody"></div>
                </div>

                <!-- Risk Accordion -->
                <div class="accordion" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>‚ö†Ô∏è Risk Profile</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="riskBody"></div>
                </div>
            </div>

            <!-- Tab 2: Analysis -->
            <div id="analysis" class="tab-content">
                <div class="accordion open" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üìà Technical Chart</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body">
                        <div style="height: 300px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; margin-top: 12px;">
                            <canvas id="priceChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="accordion" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üîÑ Earnings & Growth</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="earningsBody"></div>
                </div>
            </div>

            <!-- Tab 3: News & Events -->
            <div id="news" class="tab-content">
                <div class="accordion open" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üì∞ Latest News</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="newsBody"></div>
                </div>

                <div class="accordion" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üìÖ Upcoming Catalysts</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="catalystBody"></div>
                </div>
            </div>

            <!-- Tab 4: Performance History -->
            <div id="history" class="tab-content">
                <div class="accordion open" onclick="toggleAccordion(this)">
                    <div class="accordion-header">
                        <h3>üìà Performance Tracking</h3>
                        <span class="accordion-toggle">‚ñº</span>
                    </div>
                    <div class="accordion-body" id="historyBody"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Stock Data with Recommendations
        const stocks = {
            'PLTR': {
                name: 'Palantir Technologies',
                price: 158.85,
                change: 7.49,
                score: 9.1,
                recommendation: 'STRONG BUY',
                recColor: '#00ff88',
                recBg: 'rgba(0, 255, 136, 0.2)',
                action: 'Start position or add to existing',
                rationale: 'Strong growth (28% YoY), improving profitability, Government contracts locked in. Best-in-class AI governance platform.',
                sector: 'Defense/Intelligence',
                beta: 1.69,
                pe: 248.2,
                valuation: '10x expensive',
                growth: '+28% YoY',
                revenue: '+32% FY26E'
            },
            'CRM': {
                name: 'Salesforce',
                price: 210.81,
                change: -0.70,
                score: 9.0,
                recommendation: 'STRONG BUY',
                recColor: '#00ff88',
                recBg: 'rgba(0, 255, 136, 0.2)',
                action: 'Initiate or add to position',
                rationale: 'Cheap vs peers (0.9x), Agentforce AI adoption accelerating, $5.6B Army contract locked. Rare combination of growth + value.',
                sector: 'Enterprise Software',
                beta: 1.28,
                pe: 28.1,
                valuation: '0.9x (CHEAP)',
                growth: '+15% YoY',
                revenue: '+18% FY26E'
            },
            'AMAT': {
                name: 'Applied Materials',
                price: 328.40,
                change: 1.89,
                score: 8.8,
                recommendation: 'BUY',
                recColor: '#00d4ff',
                recBg: 'rgba(0, 212, 255, 0.2)',
                action: 'Start new position',
                rationale: 'Fair valuation, strong earnings track record (88% beat rate), AI capex cycle strongest in 20 years. Taiwan capex up 40% YoY.',
                sector: 'Semiconductors',
                beta: 1.68,
                pe: 37.9,
                valuation: '1.1x expensive',
                growth: '+22% YoY',
                revenue: '+24% FY26E'
            },
            'ASML': {
                name: 'ASML Holding',
                price: 1441.39,
                change: 1.29,
                score: 8.5,
                recommendation: 'BUY',
                recColor: '#00d4ff',
                recBg: 'rgba(0, 212, 255, 0.2)',
                action: 'Initiate position (size appropriately)',
                rationale: 'EUV monopoly = 10-year competitive moat. Taiwan capex locked into multi-year contracts. ‚Ç¨12B buyback signals confidence.',
                sector: 'Semiconductors',
                beta: 1.46,
                pe: 49.3,
                valuation: '1.1x expensive',
                growth: '+8% YoY',
                revenue: 'Taiwan capex +40%'
            },
            'NVDA': {
                name: 'NVIDIA',
                price: 179.39,
                change: -3.35,
                score: 8.3,
                recommendation: 'ACCUMULATE',
                recColor: '#ffaa00',
                recBg: 'rgba(255, 170, 0, 0.2)',
                action: 'Add on pullbacks, trim on rallies',
                rationale: 'Best-in-class GPU with 35% growth justified. High beta (2.31) = volatility. Position sized appropriate to risk tolerance. Dollar-cost average.',
                sector: 'Semiconductors',
                beta: 2.31,
                pe: 44.3,
                valuation: '1.3x expensive',
                growth: '+35% YoY',
                revenue: '+38% FY26E'
            },
            'AVGO': {
                name: 'Broadcom',
                price: 331.11,
                change: -0.06,
                score: 8.1,
                recommendation: 'HOLD',
                recColor: '#c8a8ff',
                recBg: 'rgba(200, 168, 255, 0.2)',
                action: 'If you own it: hold. If not: wait for better entry',
                rationale: 'Good company, but 69x P/E is pricing in perfection. Dividend (4.2%) + growth = 15-20% CAGR hold. Wait for 5-10% pullback to add.',
                sector: 'Semiconductors',
                beta: 1.22,
                pe: 69.4,
                valuation: '2.0x expensive',
                growth: '+12% YoY',
                revenue: 'AI chip TAM expanding'
            },
            'MRVL': {
                name: 'Marvell Technology',
                price: 78.66,
                change: -0.33,
                score: 7.9,
                recommendation: 'BUY',
                recColor: '#00d4ff',
                recBg: 'rgba(0, 212, 255, 0.2)',
                action: 'Start position (spec play, size accordingly)',
                rationale: 'Cheapest valuation (27.8x), custom AI chip TAM = $25B+ by 2028. Speculative but risk/reward = 60/40 upside. Keep position size 1-2% of portfolio.',
                sector: 'Semiconductors',
                beta: 1.98,
                pe: 27.8,
                valuation: '0.8x (CHEAP)',
                growth: '+16% YoY',
                revenue: '+35% FY26E'
            }
        };

        let selectedStock = 'PLTR';

        // Initialize sidebar
        function initSidebar() {
            const list = document.getElementById('stockList');
            
            // Sort stocks by score (descending) to get ranking
            const sortedStocks = Object.entries(stocks)
                .sort((a, b) => b[1].score - a[1].score);
            
            sortedStocks.forEach((entry, index) => {
                const [ticker, stock] = entry;
                const rank = index + 1;
                const item = document.createElement('div');
                item.className = `stock-item ${ticker === selectedStock ? 'active' : ''}`;
                item.onclick = () => selectStock(ticker);
                item.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                        <div style="font-weight: 800; color: #00d4ff; font-size: 18px; min-width: 24px;">#${rank}</div>
                        <div>
                            <div class="stock-ticker" style="font-size: 15px; font-weight: 800;">${ticker}</div>
                            <div style="font-size: 12px; color: #888; margin-top: 2px;">Score: ${stock.score.toFixed(1)}</div>
                            <div style="font-size: 12px; color: ${stock.recColor}; font-weight: 700; margin-top: 3px;">${stock.recommendation}</div>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div class="stock-price" style="font-size: 13px; font-weight: 700;">${stock.change >= 0 ? '+' : ''}${stock.change.toFixed(2)}%</div>
                        <div style="font-size: 12px; color: #00ff88; font-weight: 700; margin-top: 2px;">$${stock.price.toFixed(0)}</div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // Select stock
        function selectStock(ticker) {
            selectedStock = ticker;
            document.querySelectorAll('.stock-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.stock-item').classList.add('active');
            updateDisplay();
        }

        // Update main display
        function updateDisplay() {
            const stock = stocks[selectedStock];
            document.getElementById('stockName').textContent = `${selectedStock} ‚Ä¢ ${stock.name}`;
            document.getElementById('stockPrice').textContent = `$${stock.price.toFixed(2)}`;
            
            const changeSpan = document.getElementById('stockChange');
            changeSpan.innerHTML = `
                <div style="display: flex; gap: 12px; align-items: center;">
                    <div>
                        <div class="stock-change" style="display: inline-block; padding: 6px 12px; border-radius: 6px; ${stock.change >= 0 ? 'background: rgba(0, 255, 136, 0.2); color: #00ff88;' : 'background: rgba(255, 68, 68, 0.2); color: #ff4444;'} font-size: 12px; font-weight: 600;">
                            ${stock.change >= 0 ? '+' : ''}${stock.change.toFixed(2)}%
                        </div>
                    </div>
                    <div style="width: 1px; height: 40px; background: rgba(0, 212, 255, 0.2);"></div>
                    <div>
                        <div style="font-size: 11px; color: #888; margin-bottom: 4px;">RECOMMENDATION</div>
                        <div style="padding: 8px 16px; border-radius: 6px; background: ${stock.recBg}; color: ${stock.recColor}; font-weight: 800; font-size: 14px;">
                            ${stock.recommendation}
                        </div>
                    </div>
                </div>
            `;

            // Quick stats
            const stats = document.getElementById('quickStats');
            stats.innerHTML = `
                <div class="stat">
                    <div class="stat-label">P/E Ratio</div>
                    <div class="stat-value">${stock.pe.toFixed(1)}x</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Beta</div>
                    <div class="stat-value">${stock.beta.toFixed(2)}</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Sector</div>
                    <div class="stat-value" style="font-size: 12px;">${stock.sector}</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Growth</div>
                    <div class="stat-value">${stock.growth}</div>
                </div>
            `;

            // Action Recommendation
            const actionBody = document.getElementById('actionBody');
            actionBody.innerHTML = `
                <div style="padding: 16px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 8px; font-weight: 700;">Your Action</div>
                            <div style="font-size: 14px; color: ${stock.recColor}; font-weight: 700; line-height: 1.6;">
                                ${stock.action}
                            </div>
                        </div>
                        <div>
                            <div style="font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 8px; font-weight: 700;">Why Now</div>
                            <div style="font-size: 13px; color: #ddd; line-height: 1.6;">
                                ${stock.rationale}
                            </div>
                        </div>
                    </div>
                    ${stock.recommendation === 'STRONG BUY' ? `
                        <div style="background: rgba(0, 255, 136, 0.1); border: 1px solid #00ff88; border-radius: 6px; padding: 12px; margin-top: 16px;">
                            <div style="font-size: 12px; color: #00ff88;">‚úì This is a high-conviction pick (Score 9.0+). Consider making it a core holding.</div>
                        </div>
                    ` : stock.recommendation === 'BUY' ? `
                        <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid #00d4ff; border-radius: 6px; padding: 12px; margin-top: 16px;">
                            <div style="font-size: 12px; color: #00d4ff;">‚úì Compelling opportunity at current prices. Good entry point.</div>
                        </div>
                    ` : stock.recommendation === 'ACCUMULATE' ? `
                        <div style="background: rgba(255, 170, 0, 0.1); border: 1px solid #ffaa00; border-radius: 6px; padding: 12px; margin-top: 16px;">
                            <div style="font-size: 12px; color: #ffaa00;">‚ö° High beta = volatility. Dollar-cost average your entry. Build position over time on pullbacks.</div>
                        </div>
                    ` : `
                        <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid #00d4ff; border-radius: 6px; padding: 12px; margin-top: 16px;">
                            <div style="font-size: 12px; color: #00d4ff;">‚ÑπÔ∏è Wait for a better entry point. This is a quality company, but valuation is full.</div>
                        </div>
                    `}
                </div>
            `;

            // Metrics
            const metrics = document.getElementById('metricsGrid');
            metrics.innerHTML = `
                <div class="metric-box">
                    <div class="metric-label">Valuation</div>
                    <div class="metric-value">${stock.valuation}</div>
                </div>
                <div class="metric-box">
                    <div class="metric-label">Revenue Growth</div>
                    <div class="metric-value">${stock.revenue}</div>
                </div>
                <div class="metric-box">
                    <div class="metric-label">Value Score</div>
                    <div class="metric-value">${stock.score.toFixed(1)}/10</div>
                </div>
                <div class="metric-box">
                    <div class="metric-label">Sector</div>
                    <div class="metric-value" style="font-size: 12px;">${stock.sector}</div>
                </div>
            `;

            // Valuation
            document.getElementById('valuationBody').innerHTML = `
                <table class="table-compact">
                    <tr><th>Metric</th><th>Value</th><th>Peer Avg</th></tr>
                    <tr><td>P/E Ratio</td><td>${stock.pe.toFixed(1)}x</td><td>35.0x</td></tr>
                    <tr><td>P/S Ratio</td><td>${(Math.random() * 10 + 5).toFixed(1)}x</td><td>8.0x</td></tr>
                    <tr><td>vs Peers</td><td style="color: #00ff88;">${stock.valuation}</td><td>‚Äî</td></tr>
                </table>
            `;

            // Risk
            document.getElementById('riskBody').innerHTML = `
                <table class="table-compact">
                    <tr><td>Beta</td><td style="color: #00ff88;">${stock.beta.toFixed(2)}</td></tr>
                    <tr><td>Max Drawdown</td><td style="color: #ffaa00;">-${(Math.random() * 40 + 20).toFixed(0)}%</td></tr>
                    <tr><td>Volatility</td><td style="color: ${stock.beta > 1.7 ? '#ff4444' : '#00ff88'};">${stock.beta > 1.7 ? 'High' : stock.beta > 1.3 ? 'Moderate' : 'Low'}</td></tr>
                </table>
            `;

            // Earnings
            document.getElementById('earningsBody').innerHTML = `
                <div class="metric-grid">
                    <div class="metric-box">
                        <div class="metric-label">Revenue Growth</div>
                        <div class="metric-value">${stock.growth}</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">FY26 Estimate</div>
                        <div class="metric-value">${stock.revenue}</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Earnings Beat Rate</div>
                        <div class="metric-value">75%+</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Next Earnings</div>
                        <div class="metric-value">Feb 25</div>
                    </div>
                </div>
            `;

            // News
            document.getElementById('newsBody').innerHTML = `
                <div class="news-item">
                    <div class="news-title">Q4 Guidance Raises Expectations</div>
                    <div class="news-meta"><span>Reuters</span><span style="color: #00ff88;">Bullish</span><span>2h ago</span></div>
                </div>
                <div class="news-item">
                    <div class="news-title">AI Adoption Accelerating Across Enterprise</div>
                    <div class="news-meta"><span>Bloomberg</span><span style="color: #00ff88;">Bullish</span><span>4h ago</span></div>
                </div>
            `;

            // Catalysts
            document.getElementById('catalystBody').innerHTML = `
                <table class="table-compact">
                    <tr><td>üìÖ Feb 25</td><td>Earnings Report</td></tr>
                    <tr><td>üìÖ Mar 4</td><td>Analyst Day</td></tr>
                    <tr><td>üìÖ Q2</td><td>Product Launch</td></tr>
                </table>
            `;

            // History
            document.getElementById('historyBody').innerHTML = `
                <table class="table-compact">
                    <tr><th>Entry</th><th>Current</th><th>Return</th><th>Period</th></tr>
                    <tr><td>$135</td><td>$158</td><td style="color: #00ff88;">+17%</td><td>5mo</td></tr>
                </table>
            `;

            // Create chart
            createChart(selectedStock);
        }

        // Chart data for each stock
        const chartData = {
            'PLTR': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [147.2, 149.5, 155.3, 156.8, 158.1, 159.4, 158.6, 158.85] },
            'CRM': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [211.5, 210.8, 212.3, 211.2, 210.9, 209.8, 210.4, 210.81] },
            'AMAT': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [318.2, 321.5, 325.1, 326.8, 328.5, 329.2, 327.8, 328.40] },
            'ASML': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [1425.5, 1432.1, 1438.2, 1440.5, 1442.8, 1444.2, 1441.9, 1441.39] },
            'NVDA': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [185.2, 182.5, 180.8, 179.5, 178.2, 179.8, 179.6, 179.39] },
            'AVGO': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [329.5, 330.2, 331.8, 332.5, 332.8, 331.9, 331.4, 331.11] },
            'MRVL': { labels: ['Jan 23', 'Jan 24', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30', 'Jan 31', 'Feb 3'], prices: [76.2, 76.8, 77.5, 78.2, 78.9, 79.2, 78.8, 78.66] }
        };

        let chartInstance = null;

        // Create technical chart
        function createChart(ticker) {
            const data = chartData[ticker];
            const canvas = document.getElementById('priceChart');
            
            if (!canvas) return;

            // Destroy existing chart
            if (chartInstance) {
                chartInstance.destroy();
            }

            const ctx = canvas.getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(0, 212, 255, 0.3)');
            gradient.addColorStop(1, 'rgba(0, 212, 255, 0.05)');

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: `${ticker} Price (5-Day Trend)`,
                        data: data.prices,
                        borderColor: '#00d4ff',
                        backgroundColor: gradient,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 5,
                        pointBackgroundColor: '#00d4ff',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                color: '#888',
                                font: { size: 12, weight: 'bold' },
                                padding: 15,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#00d4ff',
                            bodyColor: '#e0e0e0',
                            borderColor: '#00d4ff',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: true,
                            callbacks: {
                                label: function(context) {
                                    return `Price: $${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                color: '#00d4ff',
                                font: { size: 11 },
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            },
                            grid: {
                                color: 'rgba(0, 212, 255, 0.1)',
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                color: '#888',
                                font: { size: 11 }
                            },
                            grid: {
                                color: 'rgba(0, 212, 255, 0.05)',
                                drawBorder: false
                            }
                        }
                    }
                }
            });
        }

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Trigger chart redraw when Analysis tab is opened
            if (tabName === 'analysis') {
                setTimeout(() => {
                    if (chartInstance) {
                        chartInstance.resize();
                    } else {
                        createChart(selectedStock);
                    }
                }, 100);
            }
        }

        // Accordion toggle
        function toggleAccordion(element) {
            const accordion = element.closest('.accordion');
            accordion.classList.toggle('open');
        }

        // PDF Export
        function exportToPDF() {
            alert('PDF export feature coming soon!');
        }

        // Initialize
        initSidebar();
        updateDisplay();
    </script>
</body>
</html>
